{"version":3,"sources":["../../src/compute/compute-tags.js"],"names":[],"mappings":";AACA,YAAY,CAAC;;QAMG,gBAAgB,GAAhB,gBAAgB;QAShB,YAAY,GAAZ,YAAY;;;;;;;AATrB,SAAS,gBAAgB,CAAC,KAAK,EAAE;AACpC,WAAO,YAAY,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE;AACvC,YAAI,IAAI,GAAG,EAAE,CAAC;AACd,YAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AAC7B,gBAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;SAChC,CAAC,CAAC;AACH,eAAO,IAAI,CAAC;KACf,CAAC,CAAC;CACN;;AACM,SAAS,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE;AACzC,QAAI,IAAI,GAAG,EAAE,CAAC;AACd,SAAK,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC1B,YAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC/B,gBAAI,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACxB,gBAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC5B,gBAAI,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE;AACxB,oBAAI,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA,GAAI,GAAG,CAAC,GAAG,CAAC,CAAC;aAC3C,CAAC,CAAC;SACN,CAAC,CAAC;KACN,CAAC,CAAC;AACH,WAAO,IAAI,CAAC;CACf","file":"compute-tags.js","sourcesContent":["// LICENSE : MIT\n\"use strict\";\n/**\n * {タグ名:出現回数}のオブジェクトを返す\n * @param {JSerWeek[]} weeks\n * @returns {{string:number}}\n */\nexport function countTagsByGroup(weeks) {\n    return countByGroup(weeks, function (item) {\n        var rank = {};\n        item.tags.forEach(function (tag) {\n            rank[tag] = ++rank[tag] || 1;\n        });\n        return rank;\n    });\n}\nexport function countByGroup(weeks, countFn) {\n    var rank = {};\n    weeks.forEach(function (week) {\n        week.items.forEach(function (item) {\n            var ret = countFn(item);\n            var keys = Object.keys(ret);\n            keys.forEach(function (key) {\n                rank[key] = (rank[key] || 0) + ret[key];\n            });\n        });\n    });\n    return rank;\n}"]}